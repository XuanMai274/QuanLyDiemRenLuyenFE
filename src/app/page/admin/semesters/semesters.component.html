<div class="container">

  <div class="header">
    <h2>Quản lý học kỳ</h2>

    <button class="btn-add" (click)="openPopup('add')">
      <i class="fa-solid fa-circle-plus"></i>
    </button>
  </div>

  <!-- ====================== POPUP FORM ====================== -->
  <div class="popup-overlay" *ngIf="showPopup">
    <div class="popup">

      <h3>{{ popupMode === 'add' ? 'Thêm học kỳ' : 'Sửa học kỳ' }}</h3>

      <form [formGroup]="form">
        <label>Tên học kỳ</label>
        <input type="text" formControlName="semesterName">

        <label>Năm học</label>
        <input type="text" formControlName="year">

        <label>Ngày bắt đầu</label>
        <input type="datetime-local" formControlName="startDate">

        <label>Ngày kết thúc</label>
        <input type="datetime-local" formControlName="endDate">
      </form>

      <div class="popup-actions">
        <button class="btn-close" (click)="closePopup()">Đóng</button>
        <button class="btn-save" (click)="save()">Lưu</button>
      </div>

    </div>
  </div>

  <!-- ====================== LIST SEMESTER ====================== -->
  <div class="card-grid">
    <div class="semester-card" *ngFor="let sem of pagedItems">

      <div class="title">Học kỳ {{ sem.semesterName }}</div>

      <div class="info">
        <p><strong>Năm học:</strong> {{ sem.year }}</p>
        <p><strong>Bắt đầu:</strong> {{ sem.startDate | date:'yyyy-MM-dd HH:mm' }}</p>
        <p><strong>Kết thúc:</strong> {{ sem.endDate | date:'yyyy-MM-dd HH:mm' }}</p>
      </div>

      <div class="actions">
        <button class="btn-edit" (click)="openPopup('edit', sem)"><i class="fa-regular fa-pen-to-square"></i></button>
        <!-- <button class="btn-status" disabled>{{ sem.isOpen ? 'Đang mở' : 'Đã đóng' }}</button> -->
      </div>

    </div>
  </div>

  <!-- ====================== PAGINATION ====================== -->
  <div class="pagination">
    <button (click)="prevPage()" [disabled]="page === 1">«</button>

    <span>Trang {{ page }} / {{ totalPages }}</span>

    <button (click)="nextPage()" [disabled]="page === totalPages">»</button>
  </div>

</div>
