<div class="container py-4">
  <h2 class="fw-bold mb-4">Điểm trung bình các lớp theo khoa</h2>

  <div class="card p-4 shadow-sm mb-4">
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label fw-semibold">Chọn Khoa</label>
        <select class="form-select" [(ngModel)]="selectedFaculty" (change)="onFacultyChange()">
          <option [ngValue]="null">-- Chọn khoa --</option>
          <option *ngFor="let f of faculties" [ngValue]="f.facultyId">{{ f.facultyName }}</option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="classAverages.length" class="chart-table-wrapper">
    <!-- Biểu đồ -->
    <div class="chart-table-wrapper">
      <div class="chart-container">
        <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
        </canvas>
      </div>

      <div class="table-wrapper">
        <h5>Danh sách lớp và xếp loại</h5>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>STT</th>
              <th>Lớp</th>
              <th>Điểm trung bình</th>
              <th>Xếp loại</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let c of classAverages; index as i">
              <td>{{ i + 1 }}</td>
              <td>{{ c.className }}</td>
              <td>{{ c.averageScore }}</td>
              <td>{{ c.rank }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
